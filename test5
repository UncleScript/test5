local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local Workspace = game:GetService("Workspace")
local player = Players.LocalPlayer
local PlayerGui = player:WaitForChild("PlayerGui")

-- GUI Setup
local screenGui = Instance.new("ScreenGui", PlayerGui)
screenGui.Name = "EnhancedVisualHatch"

local hatchFrame = Instance.new("Frame", screenGui)
hatchFrame.Size = UDim2.new(0, 360, 0, 180)
hatchFrame.Position = UDim2.new(0.5, -180, 0.4, 0)
hatchFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 40)
hatchFrame.BackgroundTransparency = 1
hatchFrame.Visible = false
Instance.new("UICorner", hatchFrame).CornerRadius = UDim.new(0, 12)

local hatchLabel = Instance.new("TextLabel", hatchFrame)
hatchLabel.Size = UDim2.new(1, 0, 0, 40)
hatchLabel.Position = UDim2.new(0, 0, 0, 0)
hatchLabel.Text = ""
hatchLabel.Font = Enum.Font.FredokaOne
hatchLabel.TextColor3 = Color3.fromRGB(255, 255, 100)
hatchLabel.TextScaled = true
hatchLabel.BackgroundTransparency = 1

local petImage = Instance.new("ImageLabel", hatchFrame)
petImage.Size = UDim2.new(0, 100, 0, 100)
petImage.Position = UDim2.new(0.5, -50, 0, 50)
petImage.BackgroundTransparency = 1
petImage.Image = "rbxassetid://0"

local mutationLabel = Instance.new("TextLabel", hatchFrame)
mutationLabel.Size = UDim2.new(1, 0, 0, 30)
mutationLabel.Position = UDim2.new(0, 0, 1, -30)
mutationLabel.Text = ""
mutationLabel.Font = Enum.Font.GothamBold
mutationLabel.TextColor3 = Color3.fromRGB(200, 100, 255)
mutationLabel.TextScaled = true
mutationLabel.BackgroundTransparency = 1

-- Image mapping (sample only; add real asset IDs)
local petImages = {
    ["Dog"] = "rbxassetid://1234567890",
    ["Bunny"] = "rbxassetid://1234567891",
    ["Golden Lab"] = "rbxassetid://1234567892",
    -- Add more pets and correct asset IDs
}

-- Animation function
local function playHatchEffect(petName, isMutated)
    hatchLabel.Text = "üéâ " .. petName .. " Hatched!"
    mutationLabel.Text = isMutated and "üß¨ Mutation Detected!" or ""
    petImage.Image = petImages[petName] or "rbxassetid://0"

    hatchFrame.Visible = true
    hatchFrame.BackgroundTransparency = 1

    local fadeIn = TweenService:Create(hatchFrame, TweenInfo.new(0.5), { BackgroundTransparency = 0.1 })
    local fadeOut = TweenService:Create(hatchFrame, TweenInfo.new(0.5), { BackgroundTransparency = 1 })

    fadeIn:Play()
    fadeIn.Completed:Wait()
    wait(2)
    fadeOut:Play()
    fadeOut.Completed:Wait()
    hatchFrame.Visible = false
end

-- Monitor hatches
local knownEggs = {}
local function detectEggHatch()
    while true do
        for _, obj in pairs(Workspace:GetDescendants()) do
            if obj:IsA("Model") and obj:FindFirstChild("ReadyToHatch") then
                local hatchFlag = obj.ReadyToHatch
                if not knownEggs[obj] and hatchFlag.Value == true then
                    knownEggs[obj] = true
                    local petName = obj.Name or "Unknown Pet"
                    local isMutated = obj:FindFirstChild("Mutation") and obj.Mutation.Value == true
                    playHatchEffect(petName, isMutated)
                end
            end
        end
        task.wait(1)
    end
end

task.spawn(detectEggHatch)

-- Credit Label
local credit = Instance.new("TextLabel", screenGui)
credit.Size = UDim2.new(0, 200, 0, 20)
credit.Position = UDim2.new(1, -210, 1, -30)
credit.Text = "üêæ Made by Uncle Script"
credit.Font = Enum.Font.Gotham
credit.TextSize = 14
credit.TextColor3 = Color3.fromRGB(255, 255, 255)
credit.BackgroundTransparency = 1
